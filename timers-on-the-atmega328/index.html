<!Doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>TIMERS ON THE ATmega168/328 - QEEWiki</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <meta name="description" content="Guide For Working With AVR Microcontrollers"/>
    <meta name="keywords"
          content="atmega8, atmega168, atmega328, atmega328p, interrupt, timer, adc, analog comparator, pwm, fast pwm, phase correct pwm, spi, uart, i2c, eeprom, tutorial, datasheet"/>
    <meta name="author" content="Chayan Mistry">

    <meta property="og:url" content="https://avr-guide.github.io"/>
    <meta property="og:site_name" content="AVR GUIDE - QEEWiki"/>
    <link rel="icon" href="../assets/img/favicon.ico">

    <!-- Place favicon.ico in the root directory -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="../assets/css/prettify.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L8GR6MPRF3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-L8GR6MPRF3');
    </script>
</head>
<body>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="check2" viewBox="0 0 16 16">
        <path
                d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path>
    </symbol>
    <symbol id="circle-half" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path>
    </symbol>
    <symbol id="moon-stars-fill" viewBox="0 0 16 16">
        <path
                d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path>
        <path
                d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path>
    </symbol>
    <symbol id="sun-fill" viewBox="0 0 16 16">
        <path
                d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path>
    </symbol>
</svg>

<div id="wrapper">
    <div class="wrap-container ">
        <header class="navbar">
            <h4>
                <a href="/">QEEWiki</a>
                <button class="navbar-toggler d-block d-md-none" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar"
                        aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </h4>
        </header>
        <div class="d-flex">
            <nav class="navbar" id="sidebar">
                <div class="container-fluid px-md-0">
                    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                         aria-labelledby="offcanvasNavbarLabel">
                        <div class="offcanvas-header border-bottom d-flex d-md-none">
                            <h5 class="offcanvas-title" id="offcanvasNavbarLabel">QEEWiki</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"
                                    aria-label="Close"></button>
                        </div>
                        <div class="offcanvas-body px-md-0 pt-0">
                            <ul class="navbar-nav justify-content-end flex-grow-1">
                                <li class="nav-item">
                                    <b>Navigation</b>
                                    <ul>
                                        <li><a href="https://chayanforyou.github.io/">Home</a></li>
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle show" role="button"
                                               data-bs-toggle="dropdown"
                                               aria-expanded="true">
                                                AVR Guide
                                            </a>
                                            <ul class="dropdown-menu show ">
                                                <li><a class="dropdown-item" href="#">AVR Basics</a></li>
                                                <li><a class="dropdown-item" href="#">Digital I/O</a></li>
                                                <li><a class="dropdown-item" href="/#interrupts">Interrupts</a></li>
                                                <li><a class="dropdown-item" href="#">Timers</a></li>
                                                <li><a class="dropdown-item" href="#">Analog I/O</a></li>
                                                <li><a class="dropdown-item" href="#">Communication</a></li>
                                                <li><a class="dropdown-item" href="#">Other</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Usefull Engineering Stuff</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <b>Resources</b>
                                    <ul>
                                        <li><a href="https://www.sparkfun.com/">Sparkfun</a></li>
                                        <li><a href="https://arduino.cc/en/Reference/HomePage">Arduino Reference</a>
                                        </li>
                                        <li><a href="https://www.eevblog.com/">EEVBlog</a></li>
                                        <li><a href="https://tahmidmc.blogspot.com/">Tahmid's Blog</a></li>
                                        <li><a href="https://labprojectsbd.com/">Lab Projects BD</a></li>
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle show" role="button" aria-expanded="true">Atmel</a>
                                            <ul class="dropdown-menu show ">
                                                <li><a class="dropdown-item" href="/assets/docs/ATmega8A.pdf"
                                                       target="_blank" rel="nofollow">Atmega8 Datasheet</a></li>
                                                <li><a class="dropdown-item"
                                                       href="/assets/docs/ATmega48A-PA-88A-PA-168A-PA-328-P.pdf"
                                                       target="_blank" rel="nofollow">ATMega168/328 Datasheet</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
            <main id="contentBox">

                <nav aria-label="breadcrumb" id="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">AVR Guide</a></li>
                        <li class="breadcrumb-item"><a href="#">Timers</a></li>
                    </ol>
                </nav>

                <div class="main-content">
                    <h3>TIMERS ON THE ATmega168/328</h3>
                    <br/>
                    <h5 class="fw-semibold">INTRODUCTION:</h5>
                    <div class="chapter ms-4 pt-2">
                        <p>
                            The timers are the heart of automation. We have seen in previous chapters how we could take
                            in an input, perform mathematical functions on the data and, perform an action. Timers give
                            us an extra level of control by giving us not only control over what happens but when it
                            happens. We can put a time delay on a self-destruct in our evil lair, we can control the
                            flash rate of our seizure causing robot and, we could ensure that our death-ray isn't fired
                            before its fully charged. We have control of time MUA HAHAHAHAHA !!!!
                        </p>
                    </div>

                    <hr class="mb-4"/>
                    <h5 class="fw-semibold">THEORY OF OPERATION:</h5>
                    <div class="chapter ms-4 py-2">
                        <p>
                            A quick review of the previous tutorial (<a href="/common-timer-theory">COMMON TIMER/COUNTER
                            THEORY</a>). The clock source (from the internal clock or an external source) sends pulses
                            to the prescaler which divides the pulses by a determined amount. This input is sent to the
                            control circuit which increments the TCNTn register. When the register hits its TOP value it
                            resets to 0 and sends a TOVn (timer overflow) signal which could be used to trigger an
                            interrupt.
                        </p>
                        <p>
                            Unfortunately, the AVR timer does process time in hours, minutes or seconds (what we are
                            used to). However, being evil masterminds we have the solution, it just requires a bit of
                            math and our old friend, the prescaler.
                        </p>
                        <p class="ms-4" style="color: blue">
                            OCRn = [ (clock_speed / Prescaler_value) * Desired_time_in_Seconds ] - 1
                        </p>
                        <P>
                            Now for the bad news OCRn has to be a whole number. If you end up with a decimal number it
                            means that your desired timer will not be exact. The other thing is that your number has to
                            be able to fit into the register. So 255 for a 8bit timers and 65535 for the 16bit timer.
                        </P>
                        <p class="fw-semibold mt-4">Normal Mode:</p>
                        <p>
                            When the prescaler receives a pulse from a clock cycle and passes it onto the Control Logic.
                            The Control Logic increments the TCNTn register by 1. When TCNTn hits the TOP (0xFF in the 8
                            bit timers and 0xFFFF in the 16 bit timer) it overflows to 0 and sets the TOVn bit in the
                            TIFR register.
                        </p>
                        <p>
                            The problem with Normal Mode is that it is very hard to use for an exact interval, because
                            of this Normal Mode is only useful if you need a none-specific time interval (say you don't
                            care if it happens every 1 or 2 ms as long as it happens at the same time each time) its
                            nice and easy option. Because, of this limitation many programmers choose to use CTC mode
                            for their timers.
                        </p>
                        <p class="fw-semibold mt-4">CTC Mode:</p>
                        <p>
                            CTC stands for "Clear Timer on Compare" and it does the following. When the prescaler
                            receives a pulse from a clock cycle and passes it onto the Control Logic. The Control Logic
                            increments the TCTn register by 1. The TCNTn register is compared to the OCRn register, when
                            a compare match occurs the TOVn bit is set in the TIFR register.
                        </p>
                        <img class="img-fluid mt-3" style="height: 280px"
                             src="/timers-on-the-atmega328/Flow-Timer-ATmega8.jpg"
                             alt="Flow-Timer-ATmega8">
                        <p class="fw-light">Flow 1: Activating The Timer</p>
                        <p>
                            The flow diagram above describes how to activate the timer. More details below.
                        </p>
                    </div>

                    <hr class="mt-4 mb-4"/>
                    <h5 class="fw-semibold">TIMER0 (8-BIT PWM):</h5>
                    <div class="chapter ms-4 py-2">
                        <img class="img-fluid mt-3" src="/timers-on-the-atmega328/ATmega328 - Timer0.JPG"
                             alt="ATmega328 - Timer0">
                        <p class="fw-light">Figure 1: Timer0 on the ATmega168/328</p>
                        <p>
                            Unlike the ATmega8 the ATmega168/328's Timer0 does have a OCR0 register therefore it is
                            capable of running in normal and CTC mode.
                        </p>
                        <p>
                            TOV0 can generate a Timer Overflow interrupt. In order to activate the timer0 interrupts you
                            need to SET(1) the TOIE0 bit within the TIMSK register.
                        </p>
                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCCR0A</th>
                                    <td>COM0A1</td>
                                    <td>COM0A0</td>
                                    <td>COM0B1</td>
                                    <td>COM0B0</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>WGM01</td>
                                    <td>WGM00</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Control Register 0 A</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCCR0B</th>
                                    <td>FOC0A</td>
                                    <td>FOC0B</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>WGM02</td>
                                    <td>CS02</td>
                                    <td>CS01</td>
                                    <td>CS00</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Control Register 0 B</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered max-width-600">
                                <tbody>
                                <tr>
                                    <th>MODE</th>
                                    <th>WGM02</th>
                                    <th>WGM01</th>
                                    <th>WGM00</th>
                                    <th>DESCRIPTION</th>
                                    <th>TOP</th>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Normal</td>
                                    <td style="text-align:center">0xFF</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase
                                        Corrected
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0xFF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">2</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td>CTC</td>
                                    <td style="text-align:center">OCR0A</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        3
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0xFF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        4
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Reserved
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        -
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        5
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM, Phase
                                        Corrected
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        OCR0A
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        6
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Reserved
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        -
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        7
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        OCR0A
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Waveform Generator Mode bits</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered max-width-600">
                                <tbody>
                                <tr>
                                    <th>CS02</th>
                                    <th>CS01</th>
                                    <th>CS00</th>
                                    <th>DESCRIPTION</th>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Timer/Counter0 Disabled</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td>No Prescaling</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td>Clock / 8</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">1</td>
                                    <td>Clock / 64</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Clock / 256</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td>Clock / 1024</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">External clock source
                                        on T0 pin, Clock on Falling edge
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">External clock source
                                        on T0 pin, Clock on rising edge
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">CS bits Settings</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TIMSK0</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>OCIE0B</td>
                                    <td>OCIE0A</td>
                                    <td>TOIE0</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Interrupt Mask Register</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TIFR0</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>OCF0B</td>
                                    <td>OCF0A</td>
                                    <td>TOV0</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Interrupt Flag Register</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCNT0</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Register (stores the counter value)</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>OCR0A</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Output Compare Register</p>

                        <p class="fw-semibold fst-italic mt-4">Software:</p>

                        <p class="fst-italic mt-4">ATmega168/328 Code:</p>
                        <pre class="prettyprint linenums lang-c">
    // this code sets up a timer0 for 1ms @ 16Mhz clock cycle
    // in order to function as a time delay at the begining of the main loop
    // using no interrupts

    #include &lt;avr/io.h&gt;

    int main(void)
    {

        while (1)
        {
            // Set the Timer Mode to CTC
            TCCR0A |= (1 << WGM01);

            // Set the value that you want to count to
            OCR0A = 0xF9;

            // start the timer
            TCCR0B |= (1 << CS01) | (1 << CS00);
            // set prescaler to 64 and start the timer

            while ( (TIFR0 & (1 << TOV0) ) > 0)        // wait for the overflow event
            {
            }

            TIFR0 |= (1 << TOV0);
            // reset the overflow flag
        }
    }</pre>
                        <p class="fst-italic mt-4">ATmega168/328 Code:</p>
                        <pre class="prettyprint linenums lang-c">
    // this code sets up a timer0 for 4ms @ 16Mhz clock cycle
    // an interrupt is triggered each time the interval occurs.

    #include &lt;avr/io.h&gt;
    #include &lt;avr/interrupt.h&gt;

    int main(void)
    {
        // Set the Timer Mode to CTC
        TCCR0A |= (1 << WGM01);

        // Set the value that you want to count to
        OCR0A = 0xF9;

        TIMSK0 |= (1 << OCIE0A);    // Set the ISR COMPA vect

        sei();         // enable interrupts

        TCCR0B |= (1 << CS02);
        // set prescaler to 256 and start the timer

        while (1)
        {
            // main loop
        }
    }

    ISR (TIMER0_COMPA_vect)  // timer0 overflow interrupt
    {
        // event to be exicuted every 4ms here
    }</pre>
                    </div>

                    <hr class="mt-4 mb-4"/>
                    <h5 class="fw-semibold">TIMER1 (16-BIT PWM):</h5>
                    <div class="chapter ms-4 py-2">
                        <img class="img-fluid mt-3" src="/timers-on-the-atmega328/ATmega328 - Timer1.JPG"
                             alt="ATmega328 - Timer1">
                        <p class="fw-light">Figure 2: Timer1 on the ATmega168/328</p>
                        <p>
                            Timer/Counter1 is the big daddy of timers. It can run in Normal mode (0xFFFF) and 2 CTC
                            modes. The difference between the 2 CTC modes that mode 4 uses the OCR1A register for its
                            compare value and mode 12 uses the ICR1 register.
                        </p>
                        <p>
                            In normal mode TOV1 can generate a Overflow interrupt. In order to activate the timer1
                            overflow interrupts you need to SET(1) the TOIE1 bit within the TIMSK register.
                        </p>
                        <p>
                            In CTC (mode 4) mode OCIF1A can generate an interrupt when it detects a compare match. In
                            order to activate the timer1 CTC interrupt SET(1) the OCF1A bit within the TIMSK register.
                        </p>
                        <p>
                            In CTC (mode 12) mode TICIE1 can generate an interrupt when it detects a compare match. In
                            order to activate the timer1 CTC interrupt SET(1) the TICIE1 bit within the TIMSK register.
                        </p>
                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCCR1A</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM1A1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM1A0</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM1B1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM1B0</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>WGM11</td>
                                    <td>WGM10</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Control Register 1 A</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCCR1B</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">ICNC1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">ICES1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>WGM13</td>
                                    <td>WGM12</td>
                                    <td>CS12</td>
                                    <td>CS11</td>
                                    <td>CS10</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Control Register 1 B</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered max-width-650">
                                <tbody>
                                <tr>
                                    <th>MODE</th>
                                    <th>WGM13</th>
                                    <th>WGM12</th>
                                    <th>WGM11</th>
                                    <th>WGM10</th>
                                    <th>DESCRIPTION</th>
                                    <th>TOP</th>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Normal</td>
                                    <td style="text-align:center">0xFFFF</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase
                                        Corrected, 8bit
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0x00FF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        2
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase
                                        Corrected, 9bit
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0x01FF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        3
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase
                                        Corrected, 10bit
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0x03FF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">4</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>CTC</td>
                                    <td style="text-align:center">OCR1A</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        5
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM, 8bit
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0x00FF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        6
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM, 9bit
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0x01FF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        7
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM, 10bit
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0x03FF
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        8
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase and
                                        Frequency Corrected
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        ICR1
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        9
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase and
                                        Frequency Corrected
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        OCR1A
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        10
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase Correct
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        ICR1
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        11
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> PWM, Phase Correct
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        OCR1A
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">12</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>CTC</td>
                                    <td style="text-align:center">ICR1</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        13
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> RESERVED</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center"></td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        14
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        ICR1
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        15
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> Fast PWM</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        OCR1A
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Waveform Generator Mode bits</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered max-width-600">
                                <tbody>
                                <tr>
                                    <th>CS12</th>
                                    <th>CS11</th>
                                    <th>CS10</th>
                                    <th>DESCRIPTION</th>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Timer/Counter1 Disabled</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td>No Prescaling</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td>Clock / 8</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">1</td>
                                    <td>Clock / 64</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Clock / 256</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td>Clock / 1024</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">External clock source
                                        on T1 pin, Clock on Falling edge
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke"> External clock
                                        source on T1 pin, Clock on rising edge
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">CS bits Settings</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCCR1C</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">FOC1A</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">FOC1B</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Control Register 1 C</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TIMSK1</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>ICIE1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>OCIE1B</td>
                                    <td>OCIE1A</td>
                                    <td>TOIE1</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Interrupt Mask Register</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TIFR1</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>ICF1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>OCF1B</td>
                                    <td>OCF1A</td>
                                    <td>TOV1</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Interrupt Flag Register</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCNT1H</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>TCNT1L</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Register (stores the counter value, 16 bit)</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>OCR1AH</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>OCR1AL</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Output Compare Register A (stores the compare value, 16 bit)</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>ICR1</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>ICR1</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Input Compare Register (can be used to stores the compare value, 16 bit)</p>

                        <p class="fw-semibold fst-italic mt-4">Software:</p>

                        <p class="fst-italic mt-4">ATmega168/328 Code:</p>
                        <pre class="prettyprint linenums lang-c">
    // this code sets up timer1 for a 1s  @ 16Mhz Clock (mode 4)

    #include &lt;avr/io.h&gt;
    #include &lt;avr/interrupt.h&gt;

    int main(void)
    {
        OCR1A = 0x3D08;

        TCCR1B |= (1 << WGM12);
        // Mode 4, CTC on OCR1A

        TIMSK1 |= (1 << OCIE1A);
        // Set interrupt on compare match

        TCCR1B |= (1 << CS12) | (1 << CS10);
        // set prescaler to 1024 and start the timer

        sei();
        // enable interrupts

        while (1)
        {
            // we have a working Timer
        }
    }

    ISR (TIMER1_COMPA_vect)
    {
        // action to be done every 1 sec
    }</pre>
                        <p class="fst-italic mt-4">ATmega168/328 Code:</p>
                        <pre class="prettyprint linenums lang-c">
    // this code sets up timer1 for a 200ms  @ 16Mhz Clock (Mode 12)

    #include &lt;avr/io.h&gt;
    #include &lt;avr/interrupt.h&gt;

    int main(void)
    {
        ICR1 = 0x30D3;

        TCCR1B |= (1 << WGM12);
        // Mode 4, CTC on OCR1A

        TIMSK1 |= (1 << ICIE1);
        // Set interrupt on compare match

        TCCR1B |= (1 << CS12);
        // set prescaler to 256 and starts the timer

        sei();
        // enable interrupts

        while (1)
        {
            // we have a working Timer
        }
    }

    ISR (TIMER1_COMPA_vect)
    {
        // action to be done every 200ms
    }
    </pre>
                    </div>

                    <hr class="mt-4 mb-4"/>
                    <h5 class="fw-semibold">TIMER2 (8-BIT PWM):</h5>
                    <div class="chapter ms-4 py-2">
                        <img class="img-fluid mt-3" src="/timers-on-the-atmega328/ATmega328 - Timer2.JPG"
                             alt="ATmega328 - Timer2">
                        <p class="fw-light">Figure 3: Timer2 on the ATmega168/328</p>
                        <p>
                            Timer/Counter2 is the preferred timer among programmers for short time delays because, its
                            prescaler has the greatest number of options . It can run in Normal mode or CTC modes.
                        </p>
                        <p>
                            In normal mode TOV2 can generate a Overflow interrupt. In order to activate the timer1
                            overflow interrupts you need to SET(1) the TOIE1 bit within the TIMSK2 register.
                        </p>
                        <p>
                            In CTC mode OCIF2 can generate an interrupt when it detects a compare match. In order to
                            activate the timer1 CTC interrupt SET(1) the OCF2 bit within the TIMSK register.
                        </p>
                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCCR2A</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM2A1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM2A0</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM2B1</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">COM2B0</td>
                                    <td>-</td>
                                    <td>-</td>
                                    <td>WGM21</td>
                                    <td>WGM20</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Control Register 2</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered max-width-600">
                                <tbody>
                                <tr>
                                    <th>MODE</th>
                                    <th>WGM21</th>
                                    <th>WGM20</th>
                                    <th>DESCRIPTION</th>
                                    <th>TOP</th>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Normal</td>
                                    <td style="text-align:center">0xFF</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        0
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">PWM Phase
                                        Corrected
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center"></td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">2</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td>CTC</td>
                                    <td style="text-align:center">OCR2</td>
                                </tr>
                                <tr>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        3
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                        1
                                    </td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">Fast PWM</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke; text-align:center">
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Waveform Generator Mode bits</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCCR2B</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">FOC2A</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">FOC2B</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>WGM22</td>
                                    <td>CS22</td>
                                    <td>CS21</td>
                                    <td>CS20</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Control Register 2</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered max-width-600">
                                <tbody>
                                <tr>
                                    <th>CS22</th>
                                    <th>CS21</th>
                                    <th>CS20</th>
                                    <th>DESCRIPTION</th>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Timer/Counter2 Disabled</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td>No Prescaling</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td>Clock / 8</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">1</td>
                                    <td>Clock / 32</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">0</td>
                                    <td>Clock / 64</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td style="text-align:center">1</td>
                                    <td>Clock / 128</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">0</td>
                                    <td>Clock / 256</td>
                                </tr>
                                <tr>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">1</td>
                                    <td style="text-align:center">1</td>
                                    <td>Clock / 1024</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">CS bits Settings</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TIMSK2</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>OCIE2B</td>
                                    <td>OCIE2A</td>
                                    <td>TOIE2</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Interrupt Mask Register 2</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TIFR2</th>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td style="color:rgb(128,128,128);background-color:whitesmoke">-</td>
                                    <td>OCF2B</td>
                                    <td>OCF2A</td>
                                    <td>TOV2</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Interrupt Flag Register 2</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>TCNT2</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Timer/Counter Register 2 (stores the counter value)</p>

                        <div class="table-responsive mt-4">
                            <table class="table table-bordered text-center max-width-600">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>7 bit</th>
                                    <th>6 bit</th>
                                    <th>5 bit</th>
                                    <th>4 bit</th>
                                    <th>3 bit</th>
                                    <th>2 bit</th>
                                    <th>1 bit</th>
                                    <th>0 bit</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>OCR2</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="fw-light">Output Compare Register 2 (stores the compare value)</p>

                        <p class="fw-semibold fst-italic mt-4">Software:</p>

                        <p class="fst-italic mt-4">ATmega168/328 Code:</p>
                        <pre class="prettyprint linenums lang-c">
    // this code sets up timer2 for a 250us  @ 16Mhz Clock

    #include &lt;avr/io.h&gt;
    #include &lt;avr/interrupt.h&gt;

    int main(void)
    {
        OCR2A = 62;

        TCCR2A |= (1 << WGM21);
        // Set to CTC Mode

        TIMSK2 |= (1 << OCIE2A);
        // Set interrupt on compare match

        TCCR2B |= (1 << CS21);
        // set prescaler to 64 and starts PWM

        sei();
        // enable interrupts

        while (1)
        {
            // Main loop
        }
    }

    ISR (TIMER2_COMPA_vect)
    {
        // action to be done every 250 usec
    }</pre>
                    </div>

                    <hr class="mt-4 mb-4"/>
                    <p>
                        Thanks all folks.
                    </p>
                    <br/>Cheers<br/>Q
                    <div><br/></div>
                    <br/>
                </div>
            </main>
        </div>
    </div>
</div>

<div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 mode-toggle" id="darkMoodDropdown">
    <button class="btn btn-primary py-2 dropdown-toggle d-flex align-items-center" id="theme" type="button"
            aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (light)">
        <svg class="bi my-1 theme-icon-active" width="1em" height="1em">
            <use href="#circle-half"></use>
        </svg>
        <span class="visually-hidden" id="theme-text">Toggle theme</span>
    </button>
    <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="theme-text" id="darkMoodDropdownMenu">
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center" data-mode="light"
                    aria-pressed="false">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
                    <use href="#sun-fill"></use>
                </svg>
                Light
                <svg class="bi ms-auto d-none" width="1em" height="1em">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center" data-mode="dark" aria-pressed="false">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
                    <use href="#moon-stars-fill"></use>
                </svg>
                Dark
                <svg class="bi ms-auto d-none" width="1em" height="1em">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center active" data-mode="auto"
                    aria-pressed="true">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
                    <use href="#circle-half"></use>
                </svg>
                Auto
                <svg class="bi ms-auto d-none" width="1em" height="1em">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
    </ul>
</div>

<script src="../assets/js/jquery-3.5.1.min.js"></script>
<script src="../assets/js/popper.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/main.js"></script>
<script src="../assets/js/prettify.js"></script>

</body>
</html>
